define("moe/API/0.0.3/API",["moe/iframeAjax/0.0.2/iframeAjax","gallery/json/1.0.3/json"],function(a,b,c){var d=jQuery;a("moe/iframeAjax/0.0.2/iframeAjax"),window.JSON||a("gallery/json/1.0.3/json");var e={},f=function(){var a=document.location.host.split(".");return a.splice(0,1),a.join(".")},g=function(a,b){var c={},e={"true":!0,"false":!1,"null":null},f=decodeURIComponent;return d.each(a.replace(/\+/g," ").split("&"),function(a,g){var h,i=g.split("="),j=f(i[0]),k=c,l=0,m=j.split("]["),n=m.length-1;if(/\[/.test(m[0])&&/\]$/.test(m[n])?(m[n]=m[n].replace(/\]$/,""),m=m.shift().split("[").concat(m),n=m.length-1):n=0,2===i.length)if(h=f(i[1]),b&&(h=h&&!isNaN(h)?+h:"undefined"===h?void 0:void 0!==e[h]?e[h]:h),n)for(;n>=l;l++)j=""===m[l]?k.length:m[l],k=k[j]=n>l?k[j]||(m[l+1]&&isNaN(m[l+1])?{}:[]):h;else d.isArray(c[j])?c[j].push(h):c[j]=void 0!==c[j]?[c[j],h]:h;else j&&(c[j]=b?void 0:"")}),c},h=function(){return window.seedit&&seedit.CONFIG.APIBaseURL?seedit.CONFIG.APIBaseURL:"http://common.seedit.com/"}(),i=function(a,b){return-1!==a.indexOf("http")?a:a.indexOf(".")>0?h+a:h+a+"."+b},j=["GET","POST","PUT","DEL"],k=function(a,b,c){var e={type:"get",dataType:"jsonp",data:{__method:"GET"},jsonp:"__c",jsonpCallback:"request",success:function(a){a.error_code&&0!==a.error_code?c&&c.call(this,a):b&&b.call(this,a)},error:function(){}};a.url=i(a.api,a.dataType),d.extend(e,a);var f=a.api.replace("/","_")+"_"+a.data.__method;delete a.api,void 0===this[f]?this[f]=1:this[f]++,e.jsonpCallback=f.replace(/\./g,"_").replace(":","").replace(/\//g,"")+"_"+this[f],e.type&&-1!==d.inArray(e.type.toLowerCase(),["post","put","del","get"])||(e.type="GET"),"get"!==e.type.toLowerCase()&&(e.type="POST",e.iframe=!0,e.dataType="json",e.url=i(e.api,"iframe")),d.ajax(e)};d.each(j,function(a,b){e[b.toLowerCase()]=function(a,c,e,h){var i={};if("function"==typeof c){if("function"==typeof e)var h=e;e=c}else"string"==typeof c&&(c=g(c)),i=c;d.extend(i,{__method:"DEL"===b?"DELETE":b});var j={api:a,dataType:"jsonp",data:i};if("string"==typeof arguments[arguments.length-1]&&(j.dataType=arguments[arguments.length-1]),d.extend(j,c),"get"!==b.toLowerCase()){j.type="POST";var l=f();l||alert("必须在生产环境或者本地绑定HOST使用"),document.domain=f()}k(j,e,h)}}),c.exports=e});
